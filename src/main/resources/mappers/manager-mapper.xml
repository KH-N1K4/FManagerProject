<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="managerMapper">
	
    <resultMap type="com.manager.freelancer.manager.model.vo.Member" id="manager_member_rm">
    		<id property="memberNo" column="MEMBER_NO"/>
    		<result property="memberEmail" column="MEMBER_EMAIL" />
	      <result property="memberPw" column="MEMBER_PW" />
	      <result property="memberTel" column="MEMBER_TEL" />
	      <result property="memberNickname" column="MEMBER_NICKNAME" />
	      <result property="memberName" column="MEMBER_NAME" />
	      <result property="memberJob" column="MEMBER_JOB" />
	      <result property="memberEnrollDate" column="MEMBER_ENROLL_DATE" />
	      <result property="memberDeleteFlag" column="MEMBER_DELETE_FL" />
	      <result property="freelancerFlag" column="FREELANCER_FL" />
	      <result property="freelancerGrade" column="GRADE_NAME" />
	      <result property="memberAuthority" column="AUTHORITY" />
    </resultMap>
    
    
    
    
    <!-- 프리랜서 등급 조회 -->
    <select id="selectFreelancerGrade" resultType="string">
    	SELECT GRADE_NAME
    	FROM FREELANCER
    	JOIN GRADE USING(GRADE_NO)
    	WHERE FREELANCER_NO=#{memberNo}
    </select>
    
    <!-- 전체 회원 수 조회 -->
    <select id="getMemberListCount" resultType="_int">
    	SELECT COUNT(*) FROM MEMBER
			WHERE MEMBER_DELETE_FL = 'N'
    </select>
    	
    
    <!-- 회원 목록 조회 + 페이징-->
    <select id="selectMemberList" resultMap="manager_member_rm">
    	SELECT MEMBER_NO, MEMBER_NAME, MEMBER_EMAIL, MEMBER_DELETE_FL, MEMBER_NICKNAME, MEMBER_JOB,
    	TO_CHAR(MEMBER_ENROLL_DATE, 'YYYY"년" MM"월" DD"일"') MEMBER_ENROLL_DATE, FREELANCER_FL
    	FROM MEMBER
    	WHERE MEMBER_DELETE_FL='N'
    	AND AUTHORITY=1
    	ORDER BY 1 DESC
    </select>

</mapper>


























